<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>BlockAllocator (AWS Athena Query Federation 2022.47.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: com.amazonaws.athena.connector.lambda.data, interface: BlockAllocator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/BlockAllocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.amazonaws.athena.connector.lambda.data</a></div>
<h1 title="Interface BlockAllocator" class="title">Interface BlockAllocator</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="BlockAllocatorImpl.html" title="class in com.amazonaws.athena.connector.lambda.data">BlockAllocatorImpl</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">BlockAllocator</span><span class="extends-implements">
extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></span></div>
<div class="block">Defines the interface that should be implemented by all reference counting Apache Arrow resource allocators
 that are provided by this SDK. You should use a BlockAllocator over an Apache Arrow BufferAllocator if the lifecycle
 of your Apache Arrow resources are not fully contained in narrow code path. In practice we've found that ensuring
 proper lifecycle for Apache Arrow resources led us to change the structure of our code in ways that made it less
 maintainable than if we had a mechanism to control the lifecyle of Apache Arrow resources that cross-cut our
 request lifecycle.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Interface</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="BlockAllocator.BatchGenerator.html" class="type-name-link" title="interface in com.amazonaws.athena.connector.lambda.data">BlockAllocator.BatchGenerator</a></code></div>
<div class="col-last even-row-color">
<div class="block">Used to generate a batch in a leak free way using the BlockAllocator to handle
 the boiler plate aspects of error detection and rollback.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Closes all Apache Arrow resources tracked by this BlockAllocator, freeing their memory.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="Block.html" title="class in com.amazonaws.athena.connector.lambda.data">Block</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createBlock(org.apache.arrow.vector.types.pojo.Schema)" class="member-name-link">createBlock</a><wbr>(org.apache.arrow.vector.types.pojo.Schema&nbsp;schema)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates an empty Apache Arrow Block with the provided Schema.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>org.apache.arrow.memory.ArrowBuf</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createBuffer(int)" class="member-name-link">createBuffer</a><wbr>(int&nbsp;size)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates an empty Apache Arrow Buffer of the requested size.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getUsage()" class="member-name-link">getUsage</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Provides access to the current memory pool usage on the underlying Apache Arrow BufferAllocator.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isClosed()" class="member-name-link">isClosed</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Provides access to the current state of this BlockAllocator.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>org.apache.arrow.vector.ipc.message.ArrowRecordBatch</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#registerBatch(com.amazonaws.athena.connector.lambda.data.BlockAllocator.BatchGenerator)" class="member-name-link">registerBatch</a><wbr>(<a href="BlockAllocator.BatchGenerator.html" title="interface in com.amazonaws.athena.connector.lambda.data">BlockAllocator.BatchGenerator</a>&nbsp;generator)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Allows for a leak-free way to create Apache Arrow Batches.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="createBlock(org.apache.arrow.vector.types.pojo.Schema)">
<h3>createBlock</h3>
<div class="member-signature"><span class="return-type"><a href="Block.html" title="class in com.amazonaws.athena.connector.lambda.data">Block</a></span>&nbsp;<span class="element-name">createBlock</span><wbr><span class="parameters">(org.apache.arrow.vector.types.pojo.Schema&nbsp;schema)</span></div>
<div class="block">Creates an empty Apache Arrow Block with the provided Schema.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>schema</code> - The schema of the Apache Arrow Block.</dd>
<dt>Returns:</dt>
<dd>THe resulting Block.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createBuffer(int)">
<h3>createBuffer</h3>
<div class="member-signature"><span class="return-type">org.apache.arrow.memory.ArrowBuf</span>&nbsp;<span class="element-name">createBuffer</span><wbr><span class="parameters">(int&nbsp;size)</span></div>
<div class="block">Creates an empty Apache Arrow Buffer of the requested size. This is useful when working with certain Apache Arrow
 types directly.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>size</code> - The number of bytes to reserve for the requested buffer.</dd>
<dt>Returns:</dt>
<dd>THe resulting Apache Arrow Buffer..</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="registerBatch(com.amazonaws.athena.connector.lambda.data.BlockAllocator.BatchGenerator)">
<h3>registerBatch</h3>
<div class="member-signature"><span class="return-type">org.apache.arrow.vector.ipc.message.ArrowRecordBatch</span>&nbsp;<span class="element-name">registerBatch</span><wbr><span class="parameters">(<a href="BlockAllocator.BatchGenerator.html" title="interface in com.amazonaws.athena.connector.lambda.data">BlockAllocator.BatchGenerator</a>&nbsp;generator)</span></div>
<div class="block">Allows for a leak-free way to create Apache Arrow Batches. At first glance this method's signature may seem ackward
 when compared to createBuffer(...) or createBlock(...) but ArrowRecordBatches are typically as part of serialization
 and as such are prone to leakage when you serialize or deserialize and invalid Block. With this approach the
 BlockAllocator is able to capture any exceptions from your BatchGenerator and perform nessesary clean up without
 your code having to implement the boiler plate for handling those edge cases.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>generator</code> - The generator which is expected to create an ArrowRecordBatch.</dd>
<dt>Returns:</dt>
<dd>THe resulting Apache Arrow Batch..</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUsage()">
<h3>getUsage</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getUsage</span>()</div>
<div class="block">Provides access to the current memory pool usage on the underlying Apache Arrow BufferAllocator.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The number of bytes that have been used (e.g. assigned to an Apache Arrow Resource like a block, batch, or buffer).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()</div>
<div class="block">Closes all Apache Arrow resources tracked by this BlockAllocator, freeing their memory.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html#close()" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isClosed()">
<h3>isClosed</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isClosed</span>()</div>
<div class="block">Provides access to the current state of this BlockAllocator.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>True if close has been called, False otherwise.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2019&#x2013;2025 <a href="https://https://aws.amazon.com//">Amazon Web Services</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
